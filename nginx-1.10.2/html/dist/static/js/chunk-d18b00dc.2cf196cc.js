(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d18b00dc"],{"159b":function(t,e,n){var a=n("da84"),o=n("fdbc"),c=n("17c2"),r=n("9112");for(var i in o){var s=a[i],u=s&&s.prototype;if(u&&u.forEach!==c)try{r(u,"forEach",c)}catch(l){u.forEach=c}}},"17c2":function(t,e,n){"use strict";var a=n("b727").forEach,o=n("a640"),c=n("ae40"),r=o("forEach"),i=c("forEach");t.exports=r&&i?[].forEach:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,e,n){"use strict";var a=n("23e7"),o=n("17c2");a({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},"4de4":function(t,e,n){"use strict";var a=n("23e7"),o=n("b727").filter,c=n("1dde"),r=n("ae40"),i=c("filter"),s=r("filter");a({target:"Array",proto:!0,forced:!i||!s},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},"69f2":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"padding-top":"46px"}},[n("van-nav-bar",{attrs:{"left-arrow":"",title:"所有房间（ "+t.num+" ）","right-text":0==t.active||1==t.active?t.showCheckbox?"退房":"批量退房":""},on:{"click-left":function(e){return t.$router.back()},"click-right":t.clickTui}}),n("div",{staticStyle:{"overflow-y":"auto",height:"calc(100% - 46px)"},attrs:{id:"scrollBox"}},[n("van-tabs",{staticClass:"tabs",attrs:{color:"#02A7F0",type:"card"},on:{change:t.changeTab},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[n("van-tab",{attrs:{name:"0",title:"全部",disabled:t.showCheckbox}}),n("van-tab",{attrs:{name:"1",title:"已入住"}}),n("van-tab",{attrs:{name:"2",title:"闲置",disabled:t.showCheckbox}})],1),n("p",{staticClass:"zhushi"},[n("span",{staticStyle:{color:"#F56C6C"}},[n("van-icon",{attrs:{name:"wap-home"}}),t._v(" 已入住")],1),n("span",{staticStyle:{color:"#67C23A"}},[n("van-icon",{attrs:{name:"wap-home"}}),t._v(" 闲置")],1)]),n("div",{staticClass:"content"},[n("van-list",{attrs:{finished:t.finished,"finished-text":""},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[n("div",{staticClass:"contentBox"},t._l(t.baseData,(function(e,a){return n("div",{key:a,staticClass:"item chuizis",style:{backgroundColor:e.F_CheckInPersonalNum>0?"#F56C6C":"#67C23A"},on:{click:function(n){return t.clickItem(e,a,e.F_HotelRoomID)}}},[t.showCheckbox?n("van-checkbox",{attrs:{"icon-size":"18px","checked-color":"#02A7F0",shape:"square"},model:{value:e.active,callback:function(n){t.$set(e,"active",n)},expression:"item.active"}}):t._e(),n("p",[t._v(t._s(e.F_RoomNumber))]),n("p",{staticStyle:{"font-size":"0.8rem"}},[t._v("("+t._s(e.F_CheckInPersonalNum)+"人)")])],1)})),0)])],1),n("div",{staticStyle:{width:"calc(100% - 3.2rem)",margin:"1rem auto","text-align":"center"}},[t.showCheckbox?n("van-button",{staticStyle:{width:"8rem"},attrs:{color:"#02A7F0"},on:{click:t.clickCancel}},[t._v("取消")]):t._e()],1)],1)],1)},o=[],c=(n("99af"),n("4de4"),n("4160"),n("a630"),n("d81d"),n("3ca3"),n("159b"),n("2909")),r=n("2241"),i=n("d399"),s=n("f803"),u={data:function(){return{showCheckbox:!1,active:0,baseData:[],loading:!1,finished:!1,page:0,num:""}},created:function(){},methods:{checkOut:function(){var t={check_in_record_id:this.$route.query.F_HotelRoomID};Object(s["c"])(t).then((function(t){console.log(t)})).catch((function(t){console.log(t)}))},onLoad:function(){var t=this;this.page++;var e={page:this.page,check_in_personal_num:0==this.active?"":1==this.active?1:0};Object(s["h"])(e).then((function(e){0==e.code?(t.baseData=[].concat(Object(c["a"])(t.baseData),Object(c["a"])(e.list)),t.num=e.total,t.loading=!1,e.list.length<10&&(t.finished=!0)):t.$api.msg("错误错误错误错误错误错误错误错误")}))},clickItem:function(t,e,n){this.showCheckbox?(console.log(11),this.baseData[e].active=!this.baseData[e].active):this.$router.push({path:"/register/roomDetail",query:{roomKey:t.F_RoomNumber,userNum:t.F_CheckInPersonalNum,F_HotelRoomID:n}})},changeTab:function(t){this.finished=!1,this.page=0,this.baseData=[]},clickTui:function(){var t=this;if(console.log(this.showCheckbox),this.showCheckbox){var e=this.baseData.filter((function(t){return t.active}));e.length>0?r["a"].confirm({title:"批量退房",message:"确定将选中的房间退房吗？"}).then((function(){i["a"].loading({message:"加载中...",forbidClick:!0,duration:1e3,onClose:function(){i["a"].success("退房成功"),t.checkOut()}})})).catch((function(){})):Object(i["a"])("请选择房间退房")}else this.$router.push({path:"/register/batchretreatroom"}),console.log(this.active)},clickCancel:function(){var t=this;this.showCheckbox=!1,this.baseData.forEach((function(t){t.active=!1})),this.$nextTick((function(){t.active=0}))},getRooms:function(){var t=Array.from({length:49}).map((function(t,e){return{roomKey:1e3*(parseInt(e/10)+1)+(e%10>0?e%10:0)+1,userNum:Math.ceil(4*Math.random())-1,active:!1}}));return t}},mounted:function(){}},l=u,h=(n("fe93"),n("2877")),f=Object(h["a"])(l,a,o,!1,null,"ec3ea85e",null);e["default"]=f.exports},b58f:function(t,e,n){},d81d:function(t,e,n){"use strict";var a=n("23e7"),o=n("b727").map,c=n("1dde"),r=n("ae40"),i=c("map"),s=r("map");a({target:"Array",proto:!0,forced:!i||!s},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},f803:function(t,e,n){"use strict";n.d(e,"i",(function(){return o})),n.d(e,"h",(function(){return c})),n.d(e,"g",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return s})),n.d(e,"l",(function(){return u})),n.d(e,"f",(function(){return l})),n.d(e,"m",(function(){return h})),n.d(e,"d",(function(){return f})),n.d(e,"j",(function(){return d})),n.d(e,"e",(function(){return m})),n.d(e,"n",(function(){return b})),n.d(e,"k",(function(){return v})),n.d(e,"b",(function(){return p}));var a=n("b775");n("5f87"),n("bc3a"),n("4328");function o(t){return Object(a["a"])({url:"enterprise/home",method:"get",params:t})}function c(t){return Object(a["a"])({url:"hotel/hotel_room/list",method:"get",params:t})}function r(t){return Object(a["a"])({url:"hotel/check_in_traveller/list",method:"get",params:t})}function i(t){return Object(a["a"])({url:"hotel/check_in_traveller",method:"delete",data:t})}function s(t){return Object(a["a"])({url:"hotel/check_in_traveller/list",method:"delete",data:t})}function u(t){return Object(a["a"])({url:"hotel/hotel_room/list",method:"delete",data:t})}function l(t){return Object(a["a"])({url:"hotel/check_in_traveller",method:"get",params:t})}function h(t){return Object(a["a"])({url:"hotel/hotel_room",method:"get",params:t})}function f(t){return Object(a["a"])({url:"hotel/check_in_traveller",method:"post",data:t})}function d(t){return Object(a["a"])({url:"hotel/check_in_traveller",method:"put",data:t})}function m(t){return Object(a["a"])({url:"hotel/check_in_traveller",method:"get",params:t})}function b(t){return Object(a["a"])({url:"enterprise/update",method:"post",data:t})}function v(t){return Object(a["a"])({url:"hotel/traveller_hotel_room",method:"put",data:t})}function p(t){return Object(a["a"])({url:"hotel/check_in_traveller/list",method:"put",data:t})}},fe93:function(t,e,n){"use strict";var a=n("b58f"),o=n.n(a);o.a}}]);
//# sourceMappingURL=chunk-d18b00dc.2cf196cc.js.map