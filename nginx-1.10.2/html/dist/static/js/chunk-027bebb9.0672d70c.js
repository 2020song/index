(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-027bebb9"],{"358e":function(t,e,o){},"477f":function(t,e,o){"use strict";var n=o("358e"),r=o.n(n);r.a},"86da":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("van-nav-bar",{attrs:{"left-arrow":"",title:"房号 "+t.roomKey+" ( "+t.userNum+" )"},on:{"click-left":function(e){return t.$router.back()}}}),o("div",{staticStyle:{"overflow-y":"auto",height:"calc(100% - 46px)"}},[o("van-pull-refresh",{attrs:{"success-text":"刷新成功"},on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[o("van-list",{attrs:{finished:t.finished,"finished-text":0==t.list.length?"没有更多了":""},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,n){return o("div",{key:n,staticClass:"item",on:{click:function(o){return t.toInfo(e)}}},[o("img",{staticClass:"item_img",attrs:{src:t.staticUrl+e.F_IdentityCardPhoto,alt:""}}),o("div",{staticClass:"item_info"},[o("p",[t._v(t._s(e.F_Name)+" "),o("img",{attrs:{src:"/images/"+("男"==e.F_Sex?"man":"woman")+".png",alt:""}})]),o("p",[t._v(t._s(e.F_MobilePhone))]),o("p",[t._v(t._s(e.F_IDCard))]),o("p",[t._v("入住时间: "+t._s(e.F_CheckInTime))]),o("van-button",{staticClass:"remove",attrs:{color:"#F56C6C",size:"small",block:""},on:{click:function(o){return o.stopPropagation(),t.clickTui(e.F_Name,e.F_CheckInRecordID)}}},[t._v("退房")]),o("van-button",{staticClass:"change",attrs:{color:"#409EFF",size:"small",block:""},on:{click:function(o){return o.stopPropagation(),t.toChange(e.F_CheckInRecordID)}}},[t._v("换房")])],1)])})),0),o("div",{staticClass:"jus-c",staticStyle:{"padding-top":"2rem"}},[o("van-button",{staticStyle:{width:"7rem","margin-right":"0.8rem"},attrs:{color:"#409EFF",size:"normal"},on:{click:t.toAdd}},[t._v("增加同住人")]),o("van-button",{staticStyle:{width:"7rem","margin-right":"0.8rem"},attrs:{color:"#409EFF",size:"normal"},on:{click:t.clickAllTui}},[t._v("全部退房")]),o("van-button",{staticStyle:{width:"7rem"},attrs:{color:"#409EFF",size:"normal"},on:{click:function(e){return e.stopPropagation(),t.toChange(t.$route.query.F_HotelRoomID,1)}}},[t._v("全部换房")])],1)],1)],1)],1)},r=[],i=o("2241"),c=o("d399"),a=o("f803"),s={data:function(){return{list:[],loading:!1,finished:!1,refreshing:!1,page:0,imgUrl:"",roomKey:"",userNum:""}},filters:{},created:function(){this.roomapartment(),this.imgUrl=this.$img},computed:{staticUrl:function(){return window.staticUrl}},methods:{homeList:function(){var t=this,e={hotel_room_id:this.$route.query.F_HotelRoomID};Object(a["g"])(e).then((function(e){console.log(e.list),t.list=e.list,t.userNum=e.total,t.loading=!1,t.finished=!0})).catch((function(t){console.log(t)}))},checkOut:function(t){var e=this,o={check_in_record_id:t};Object(a["c"])(o).then((function(t){e.homeList(),console.log(t)})).catch((function(t){}))},roomapartment:function(){var t=this,e={hotel_room_id:this.$route.query.F_HotelRoomID};Object(a["m"])(e).then((function(e){0==e.code?t.roomKey=e.data.F_RoomNumber:t.$api.msg("错误错误错误错误错误错误错误错误")}))},toChange:function(t,e){0==this.list.length?this.$api.msg("没有人员换房"):this.$router.push({path:"/register/changeRoom",query:{F_CheckInRecordID:t,all:1==e?1:0}})},toInfo:function(t){this.$router.push({path:"/register/createdparticulars",query:{F_CheckInRecordID:t.F_CheckInRecordID,F_HotelRoomID:this.$route.query.F_HotelRoomID,room:this.roomKey}})},toAdd:function(){3==this.list.length?this.$api.msg("入住人数不得多于3人"):this.$router.push({path:"/register/createdhotel",query:{F_HotelRoomID:this.$route.query.F_HotelRoomID,room:this.roomKey}})},clickAllTui:function(){var t=this;0==this.list.length?this.$api.msg("没有人员退房"):i["a"].confirm({title:"退房",message:"确定将"+this.$route.query.roomKey+"房间退房吗？"}).then((function(){var e={hotel_room_id:t.$route.query.F_HotelRoomID};Object(a["a"])(e).then((function(e){c["a"].loading({message:"加载中...",forbidClick:!0,duration:1e3,onClose:function(){c["a"].success("退房成功"),t.homeList()}})}))})).catch((function(){}))},clickTui:function(t,e){var o=this;i["a"].confirm({title:"退房",message:"确定将"+t+"从房间退房吗？"}).then((function(){c["a"].loading({message:"加载中...",forbidClick:!0,duration:1e3,onClose:function(){c["a"].success("退房成功"),o.checkOut(e)}})})).catch((function(){console.log(123)}))},onLoad:function(){this.homeList()},onRefresh:function(){this.finished=!0,this.loading=!0,this.homeList(),this.refreshing=!1}}},u=s,l=(o("477f"),o("2877")),h=Object(l["a"])(u,n,r,!1,null,"4dedf892",null);e["default"]=h.exports},f803:function(t,e,o){"use strict";o.d(e,"i",(function(){return r})),o.d(e,"h",(function(){return i})),o.d(e,"g",(function(){return c})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return s})),o.d(e,"l",(function(){return u})),o.d(e,"f",(function(){return l})),o.d(e,"m",(function(){return h})),o.d(e,"d",(function(){return d})),o.d(e,"j",(function(){return m})),o.d(e,"e",(function(){return f})),o.d(e,"n",(function(){return _})),o.d(e,"k",(function(){return g})),o.d(e,"b",(function(){return p}));var n=o("b775");o("5f87"),o("bc3a"),o("4328");function r(t){return Object(n["a"])({url:"enterprise/home",method:"get",params:t})}function i(t){return Object(n["a"])({url:"hotel/hotel_room/list",method:"get",params:t})}function c(t){return Object(n["a"])({url:"hotel/check_in_traveller/list",method:"get",params:t})}function a(t){return Object(n["a"])({url:"hotel/check_in_traveller",method:"delete",data:t})}function s(t){return Object(n["a"])({url:"hotel/check_in_traveller/list",method:"delete",data:t})}function u(t){return Object(n["a"])({url:"hotel/hotel_room/list",method:"delete",data:t})}function l(t){return Object(n["a"])({url:"hotel/check_in_traveller",method:"get",params:t})}function h(t){return Object(n["a"])({url:"hotel/hotel_room",method:"get",params:t})}function d(t){return Object(n["a"])({url:"hotel/check_in_traveller",method:"post",data:t})}function m(t){return Object(n["a"])({url:"hotel/check_in_traveller",method:"put",data:t})}function f(t){return Object(n["a"])({url:"hotel/check_in_traveller",method:"get",params:t})}function _(t){return Object(n["a"])({url:"enterprise/update",method:"post",data:t})}function g(t){return Object(n["a"])({url:"hotel/traveller_hotel_room",method:"put",data:t})}function p(t){return Object(n["a"])({url:"hotel/check_in_traveller/list",method:"put",data:t})}}}]);
//# sourceMappingURL=chunk-027bebb9.0672d70c.js.map